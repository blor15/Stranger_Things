(this.webpackJsonpStrangers_Things=this.webpackJsonpStrangers_Things||[]).push([[0],{28:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(15),r=n.n(s),o=n(7),i=n(10),a=n(2),u=function(t){var e=t.fail,n=t.options,c=t.success,s=t.url;return fetch(s,n).then((function(t){return!t.ok||t.status>=400?e(t):t.json().then(c)}),e)},j="".concat("https://strangers-things.herokuapp.com","/").concat("api","/").concat("2107-CSU-RM-WEB-PT"),l=n(1),b=function(t){var e=t.clearError,n=t.onAuthenticate,s=t.onError,r=Object(c.useState)(""),i=Object(o.a)(r,2),a=i[0],b=i[1],d=Object(c.useState)(""),h=Object(o.a)(d,2),O=h[0],p=h[1],x=Object(c.useCallback)((function(t){e(),b(t.target.value)})),f=Object(c.useCallback)((function(t){e(),p(t.target.value)}));return Object(l.jsxs)("section",{children:[Object(l.jsx)("label",{htmlFor:"UsernameInput",children:"Username"}),Object(l.jsx)("input",{id:"UsernameInput",type:"text",onChange:x}),Object(l.jsx)("label",{htmlFor:"PasswordInput",children:"Password"}),Object(l.jsx)("input",{id:"PasswordInput",type:"password",onChange:f}),Object(l.jsx)("button",{onClick:function(){return t=n,e=s,c={username:a,password:O},void u({url:j+"/users/login",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:c})},success:t,fail:e});var t,e,c},className:"btn btn-primary btn-sm",children:"Log in"}),Object(l.jsx)("button",{onClick:function(){return t=n,e=s,c={username:a,password:O},void u({url:j+"/users/register",options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:c})},success:t,fail:e});var t,e,c},className:"btn btn-info btn-sm",children:"Register"})]})},d=function(t,e){u({url:j+"/posts",options:{},success:t,fail:e})},h=Object(c.createContext)(null),O=function(){var t=Object(c.useState)([]),e=Object(o.a)(t,2),n=e[0],s=e[1],r=Object(c.useState)(""),i=Object(o.a)(r,2),a=i[0],u=i[1],j=Object(c.useContext)(h),b=n.filter((function(t){return t.title.includes(a)}));return Object(c.useEffect)((function(){d((function(t){return s(t.data.posts)}),console.error)}),[d]),Object(l.jsxs)("div",{children:[Object(l.jsx)("input",{type:"text",onChange:function(t){return u(t.target.value)}}),Object(l.jsx)("ul",{children:b.map((function(t){return console.log(t),Object(l.jsxs)("li",{children:[j&&t.author._id,Object(l.jsxs)("p",{children:["Location: ",t.location]}),Object(l.jsxs)("p",{children:["Created by: ",t.author.username]}),Object(l.jsxs)("p",{children:["Created at: ",t.createdAt]}),Object(l.jsx)("h2",{children:t.title}),Object(l.jsxs)("h3",{children:["Description: ",t.description]}),Object(l.jsxs)("p",{children:["Price: ",t.price]})]},"".concat(t.author._id,"_").concat(t.createdAt))}))})]})};function p(t){return Object(l.jsx)("button",{onClick:p,children:"Log out"})}var x=function(){var t=Object(c.useState)(""),e=Object(o.a)(t,2),n=e[0],s=e[1],r=Object(c.useState)(null),u=Object(o.a)(r,2),j=u[0],d=u[1],x=function(){return s("")},f=function(t){d(t.data.token)},g=function(){s("Auth failed")};return Object(l.jsxs)(h.Provider,{value:j,children:[Object(l.jsxs)(i.a,{children:[j&&Object(l.jsx)(p,{}),Object(l.jsxs)("nav",{className:"navbar navbar-default",children:[Object(l.jsx)("h2",{children:"Stranger's Things"}),Object(l.jsxs)("div",{children:[Object(l.jsx)(i.b,{to:"/login",id:"login",children:"Login/Register "}),Object(l.jsx)(i.b,{to:"/posts",children:"Posting "})]})]}),Object(l.jsxs)(a.c,{children:[Object(l.jsx)(a.a,{path:"/login",component:j?function(){return Object(l.jsx)("h1",{children:"You are logged in."})}:function(){return Object(l.jsx)(b,{clearError:x,onAuthenticate:f,onError:g})}}),Object(l.jsx)(a.a,{path:"/posts",component:O})]})]}),n&&Object(l.jsx)("p",{style:{color:"red"},children:n})]})};r.a.render(Object(l.jsx)(x,{}),document.getElementById("app"))}},[[28,1,2]]]);
//# sourceMappingURL=main.bb3c7025.chunk.js.map